<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SoundSteps - Interactive Phonics Learning Platform">
    <title>SoundSteps - Learn Phonics the Fun Way</title>
    <link rel="stylesheet" href="/static/styles.css?v=6">
    <!-- Services -->
    <script src="/static/services/authService.js?v=6"></script>
    <script src="/static/services/progressService.js?v=6"></script>
    <script src="/static/services/leaderboardService.js?v=6"></script>
    <script src="/static/services/feedbackService.js?v=6"></script>
    <!-- Auth Components -->
    <script src="/static/components/authUI.js?v=6"></script>
    <script src="/static/init.js?v=6"></script>
    <!-- Main App -->
    <script src="/static/app.js?v=6" defer></script>
</head>
<body>
    <!-- Main Container -->
    <main class="app-container" id="appContainer">
        
        <!-- Auth Screen (Login/Register) -->
        <div class="auth-screen" id="authScreen">
            <div class="auth-content" id="authContent">
                <!-- Auth UI will be rendered here by authUI.js -->
            </div>
        </div>

        <!-- Start Screen (Legacy - Now handled by auth) -->
        <div class="screen hidden" id="startScreen">
            <div class="start-content">
                <div class="logo">
                    <h1 class="brand-title">SoundSteps</h1>
                    <span class="sparkle">‚ú®</span>
                </div>
                <p class="tagline">Learn phonics the fun way!</p>
                
                <div class="start-form">
                    <input 
                        type="text" 
                        id="userName" 
                        placeholder="Enter your name (optional)"
                        class="name-input"
                        maxlength="20"
                    >
                    <button id="startBtn" class="btn btn-primary btn-large">
                        Start Learning
                    </button>
                </div>
                
                <div class="features-preview">
                    <div class="feature-item">üìö Flashcards</div>
                    <div class="feature-item">üîä Sound It Out</div>
                    <div class="feature-item">üëæ Games</div>
                </div>
            </div>
        </div>

        <!-- Dashboard/Navigation Screen -->
        <div class="screen hidden" id="dashboardScreen">
            <header class="header">
                <button class="home-btn" id="homeBtn" aria-label="Home">
                    <svg class="home-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                    </svg>
                </button>
                <span class="brand-name">SoundSteps <span class="sparkle">‚ú®</span></span>
                <div class="header-right">
                    <span class="user-badge" id="userBadge"></span>
                    <button class="logout-btn" id="logoutBtn" aria-label="Logout">
                        <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                            <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                        </svg>
                    </button>
                </div>
            </header>

            <div class="dashboard-content">
                <h2 class="welcome-message" id="welcomeMessage">Welcome!</h2>
                
                <!-- User Stats Section -->
                <div class="user-stats-row">
                    <div class="stat-card">
                        <span class="stat-icon">‚≠ê</span>
                        <div class="stat-info">
                            <span class="stat-value" id="totalPoints">0</span>
                            <span class="stat-label">Points</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">üî•</span>
                        <div class="stat-info">
                            <span class="stat-value" id="currentStreak">0</span>
                            <span class="stat-label">Streak</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <span class="stat-icon">üèÜ</span>
                        <div class="stat-info">
                            <span class="stat-value" id="userRank">#1</span>
                            <span class="stat-label">Rank</span>
                        </div>
                    </div>
                </div>
                
                <!-- Module Grid with Colorful Tiles -->
                <div class="module-grid">
                    <button class="module-card gradient-pink" data-module="flashcards">
                        <div class="module-icon">üìö</div>
                        <h3 class="module-title">Flashcards</h3>
                        <p class="module-desc">Learn letters A-Z</p>
                    </button>
                    
                    <button class="module-card gradient-blue" data-module="soundout">
                        <div class="module-icon">üîä</div>
                        <h3 class="module-title">Sound It Out</h3>
                        <p class="module-desc">Blend phonemes</p>
                    </button>
                    
                    <button class="module-card gradient-green" data-module="monster">
                        <div class="module-icon">üëæ</div>
                        <h3 class="module-title">Hungry Monster</h3>
                        <p class="module-desc">Feed the monster!</p>
                    </button>
                    
                    <button class="module-card gradient-purple" data-module="pairs">
                        <div class="module-icon">üéØ</div>
                        <h3 class="module-title">Minimal Pairs</h3>
                        <p class="module-desc">Sort sounds</p>
                    </button>
                </div>
                
                <!-- Skills & Achievements -->
                <div class="skills-section">
                    <h3 class="section-title">üèÖ Skills Earned</h3>
                    <div class="skills-grid" id="skillsGrid">
                        <!-- Skills will be populated by JS -->
                        <div class="skill-badge locked">üî§ ABC Master</div>
                        <div class="skill-badge locked">üîä Sound Pro</div>
                        <div class="skill-badge locked">üëæ Monster Tamer</div>
                        <div class="skill-badge locked">üéØ Pair Expert</div>
                    </div>
                </div>
                
                <!-- Leaderboard Preview -->
                <div class="leaderboard-section">
                    <h3 class="section-title">üèÜ Leaderboard</h3>
                    <div class="leaderboard-preview" id="leaderboardPreview">
                        <!-- Leaderboard will be populated by JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Flashcards Screen -->
        <div class="screen hidden" id="flashcardsScreen">
            <header class="header">
                <button class="home-btn back-btn" aria-label="Back to menu">
                    <svg class="home-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                    </svg>
                </button>
                <span class="brand-name">SoundSteps <span class="sparkle">‚ú®</span></span>
            </header>

            <div class="flashcard-content">
                <h1 class="page-title">Flashcards</h1>
                
                <div class="card animate" id="flashcard">
                    <div class="letter-display">
                        <span class="letter-upper" id="letterUpper">A</span>
                        <span class="letter-lower" id="letterLower">a</span>
                    </div>
                    
                    <div class="image-container">
                        <img 
                            id="cardImage" 
                            src="/assets/images/apple.webp" 
                            alt="Apple"
                            class="card-image"
                            loading="lazy"
                        >
                    </div>
                    
                    <div class="word-label" id="wordLabel">Apple</div>
                    
                    <button class="play-sound-btn" id="playSoundBtn" aria-label="Play sound">
                        <svg class="sound-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>
                        </svg>
                    </button>
                </div>
                
                <div class="card-controls">
                    <button class="btn btn-secondary" id="prevCardBtn">‚Üê Previous</button>
                    
                    <span class="card-index" id="cardIndex">1 / 5</span>
                    
                    <button class="btn btn-secondary" id="nextCardBtn">Next ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Sound It Out Screen -->
        <div class="screen hidden" id="soundoutScreen">
            <header class="header">
                <button class="home-btn back-btn" aria-label="Back to menu">
                    <svg class="home-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                    </svg>
                </button>
                <span class="brand-name">SoundSteps <span class="sparkle">‚ú®</span></span>
            </header>

            <div class="soundout-content">
                <h1 class="page-title">Sound It Out</h1>
                
                <div class="card">
                    <div class="word-display" id="soundoutWord">cat</div>
                    
                    <div class="image-container">
                        <img 
                            id="soundoutImage" 
                            src="/assets/images/cat.webp" 
                            alt="Cat"
                            class="card-image"
                        >
                    </div>
                    
                    <div class="phoneme-display" id="phonemeDisplay">
                        <span class="phoneme">c</span>
                        <span class="phoneme">a</span>
                        <span class="phoneme">t</span>
                    </div>
                    
                    <div class="slider-container">
                        <label class="slider-label">
                            <span>Segmented</span>
                            <span>Blended</span>
                        </label>
                        <input 
                            type="range" 
                            id="blendSlider" 
                            min="0" 
                            max="100" 
                            value="0"
                            class="blend-slider"
                        >
                    </div>
                    
                    <div class="sound-buttons">
                        <button class="btn btn-primary" id="playBlendBtn">
                            üîä Play Sound
                        </button>
                        <button class="btn btn-mic" id="micPracticeBtn">
                            üé§ Practice
                        </button>
                    </div>
                    
                    <div class="speech-feedback" id="speechFeedback"></div>
                </div>
                
                <div class="navigation-controls">
                    <button class="btn btn-secondary" id="prevWordBtn">‚Üê Previous</button>
                    <span id="wordProgress">1 / 5</span>
                    <button class="btn btn-secondary" id="nextWordBtn">Next ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Hungry Monster Game Screen -->
        <div class="screen hidden" id="monsterScreen">
            <header class="header">
                <button class="home-btn back-btn" aria-label="Back to menu">
                    <svg class="home-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                    </svg>
                </button>
                <span class="brand-name">SoundSteps <span class="sparkle">‚ú®</span></span>
            </header>

            <div class="game-content">
                <h1 class="page-title">Hungry Monster</h1>
                
                <div class="monster-container">
                    <div class="monster-avatar" id="monsterAvatar">
                        <span class="monster-emoji">üëæ</span>
                    </div>
                    
                    <div class="speech-bubble" id="monsterQuestion">
                        <span class="speech-text" id="monsterSpeechText">I'm hungry! Feed me something...</span>
                    </div>
                </div>
                
                <div class="options-grid" id="monsterOptions">
                    <!-- Options will be dynamically inserted -->
                </div>
                
                <div class="game-feedback hidden" id="gameFeedback">
                    <div class="feedback-content"></div>
                </div>
                
                <div class="game-progress">
                    <span id="gameProgress">Question 1 / 6</span>
                    <span id="gameScore">Score: 0</span>
                </div>
            </div>
            
            <!-- Confetti canvas for celebration -->
            <canvas id="confettiCanvas" class="confetti-canvas"></canvas>
        </div>

        <!-- Minimal Pairs Screen -->
        <div class="screen hidden" id="pairsScreen">
            <header class="header">
                <button class="home-btn back-btn" aria-label="Back to menu">
                    <svg class="home-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                    </svg>
                </button>
                <span class="brand-name">SoundSteps <span class="sparkle">‚ú®</span></span>
            </header>

            <div class="pairs-content">
                <h1 class="page-title">Minimal Pairs</h1>
                <p class="pairs-instruction" id="pairsCategory">Sort: /p/ vs /b/</p>
                
                <div class="sorting-area" id="sortingArea">
                    <!-- Drop zones will be dynamically created -->
                </div>
                
                <div class="words-to-sort" id="wordsToSort">
                    <!-- Words will be dynamically inserted -->
                </div>
                
                <div class="pairs-feedback hidden" id="pairsFeedback"></div>
                
                <button class="btn btn-primary" id="checkPairsBtn">Check Answers</button>
            </div>
        </div>

        <!-- Loading Indicator -->
        <div class="loading hidden" id="loadingIndicator">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>

    </main>
</body>
</html>
